(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+5i3":function(t,e,s){},"+lyz":function(t,e,s){t.exports=s.p+"98f48c4b98369fa1c1b63b653ed0ea3e.svg"},"7qVP":function(t,e,s){t.exports=s.p+"b44ba96b76b33b01a3ded944585d95f7.mp3"},Coxq:function(t,e,s){t.exports=s.p+"de8d272e1d85031c228dd258ade37a58.svg"},DwMZ:function(t,e,s){t.exports=s.p+"0502bf4e41d1e7dddcd6fdec8a95a39e.wav"},Ydao:function(t,e,s){t.exports=s.p+"bf106e6a962421f0651f8e77797753c2.svg"},e6Wu:function(t,e,s){"use strict";s.r(e);var i=s("Ydao"),a=s.n(i),n=s("7qVP"),r=s.n(n),o=s("DwMZ"),c=s.n(o);function l(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(t,e){var s,i;return s=14+t,i=e-t-14,s=Math.ceil(s),i=Math.floor(i),Math.floor(Math.random()*(i-s+1))+s}var f=0,u=function(){function t(e,s,i){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=f++,this.size=10*(n=10,Math.ceil(Math.random()*Math.floor(n))),this.pointValue=10-this.size/10+1,this.xPos=h(this.size,e),this.yPos=s-this.size,this.lastTickTime=i,this.offset=0,this.skullImg=new Image,this.skullImg.src=a.a,this.sfx={crunch:new Audio,burn:new Audio},this.sfx.crunch.src=r.a,this.sfx.crunch.volume=.2,this.sfx.burn.src=c.a}var e,s,i;return e=t,(s=[{key:"draw",value:function(t){t.drawImage(this.skullImg,this.xPos,this.yPos,this.size,this.size)}},{key:"move",value:function(t,e,s,i){this.offset=s?i-e:this.offset,s||(this.yPos+=(e-this.lastTickTime+this.offset)*(t/1e3),this.lastTickTime=e,this.offset=0)}},{key:"wasClicked",value:function(t){return Math.pow(t.xPos-(this.xPos+this.size/2),2)+Math.pow(t.yPos-(this.yPos+this.size/2),2)<Math.pow(this.size/2,2)}}])&&l(e.prototype,s),i&&l(e,i),t}(),d="Source Code Pro",v="Creepster",m="#00ff00",g="#cccccc",p=s("i7XU"),y=s.n(p);function k(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var w=function(){function t(e,s,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.centerX=e/2,this.spiderWebImg=new Image,this.spiderWebImg.height=i?120:200,this.spiderWebImg.width=i?120:200,this.spiderWebImg.src=y.a,this.title={size:i?50:80},this.title.yPos=s/2-this.title.size,this.subtitle={size:i?28:34},this.subtitle.yPos=s/2+this.subtitle.size}var e,s,i;return e=t,(s=[{key:"load",value:function(t,e){t.textAlign="center",t.font="".concat(this.title.size,"px ").concat(v),t.fillStyle=g,t.fillText("SKULL CRUSHER",this.centerX,this.title.yPos),t.font="".concat(this.subtitle.size,"px  ").concat(d),t.fillText("Start",this.centerX,this.subtitle.yPos),t.drawImage(this.spiderWebImg,e?-50:-80,e?-42:-72,e?120:200,e?120:200)}}])&&k(e.prototype,s),i&&k(e,i),t}(),x=s("xnML"),b=s.n(x);function T(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var S=function(){function t(e,s,i){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fireHeight=60,this.imageData=e.createImageData(s,this.fireHeight),this.data=this.imageData.data,this.fire=[],this.fire.length=s*this.fireHeight,this.fire.fill(0),this.sfx=new Audio,this.sfx.src=b.a,this.sfx.addEventListener("ended",function(){a.sfx.play()}),this.colors=[],this.colors.length=256;for(var n=0;n<256;n++){this.colors[n]=[0,0,0]}for(var r=0;r<32;++r)this.colors[r][2]=r<<1,this.colors[r+32][0]=r<<3,this.colors[r+32][2]=64-(r<<1),this.colors[r+64][0]=255,this.colors[r+64][1]=r<<3,this.colors[r+96][0]=255,this.colors[r+96][1]=255,this.colors[r+96][2]=r<<2,this.colors[r+128][0]=255,this.colors[r+128][1]=255,this.colors[r+128][2]=64+(r<<2),this.colors[r+160][0]=255,this.colors[r+160][1]=255,this.colors[r+160][2]=128+(r<<2),this.colors[r+192][0]=255,this.colors[r+192][1]=255,this.colors[r+192][2]=192+r,this.colors[r+224][0]=255,this.colors[r+224][1]=255,this.colors[r+224][2]=224+r}var e,s,i;return e=t,(s=[{key:"draw",value:function(t,e,s,i){if(!i){for(var a=e*(this.fireHeight-1),n=0;n<e;n++)this.fire[a+n]=Math.random()>.5?255:0;for(var r=0;r<this.fireHeight;++r){for(var o=0;o<e;++o){var c=0;c=0===o?(this.fire[a]+this.fire[a]+this.fire[a-e])/3:o===e-1?(this.fire[a+o]+this.fire[a-e+o]+this.fire[a+o-1])/3:(this.fire[a+o]+this.fire[a+o+1]+this.fire[a+o-1]+this.fire[a-e+o])/4,this.fire[a-e+o]=Math.floor(c>1?c-1:c);if(r>=2){var l=r*e*4+4*o,h=this.fire[(r-2)*e+o];this.data[l]=this.colors[h][0],this.data[++l]=this.colors[h][1],this.data[++l]=this.colors[h][2],this.data[++l]=!this.colors[h][0]&&!this.colors[h][1]&&this.colors[h][2]<=255?0:200}}a-=e}}t.putImageData(this.imageData,0,s-this.fireHeight)}}])&&T(e.prototype,s),i&&T(e,i),t}();function P(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function E(){document.getElementById("game-canvas-overlay").classList.toggle("canvas__overlay--active")}function C(){document.getElementById("game-header").classList.toggle("header--hidden")}function I(t){var e=document.getElementById("game-score");e.dataset.score=0!==t?Number(e.dataset.score)+t:0}function z(t){document.getElementById("game-life").style["min-width"]="".concat(t,"0px")}function M(t){var e={};if(t.targetTouches&&1===t.targetTouches.length){t.preventDefault();var s=t.targetTouches[0];e={xPos:s.pageX,yPos:s.pageY}}else e={xPos:t.offsetX,yPos:t.offsetY};return e}var L=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config={isSmallScreen:window.innerWidth<800,headerHeight:60},this.canvas=document.getElementById("game-canvas"),this.canvas.width=this.config.isSmallScreen?window.innerWidth:800,this.canvas.height=window.innerHeight,this.ctx=this.canvas.getContext("2d"),this.fireCanvas=document.getElementById("fire-canvas"),this.fireCanvas.width=this.config.isSmallScreen?window.innerWidth:800,this.fireCanvas.height=window.innerHeight,this.fireCtx=this.fireCanvas.getContext("2d"),this.components={fire:new S(this.fireCtx,this.fireCanvas.width,this.fireCanvas.height)},this.displayScores={},this.screens={titleScreen:new w(this.canvas.width,this.canvas.height,this.config.isSmallScreen)},this.skulls={},this.state={currentScreen:"title",isGameTabHidden:!1,isPaused:!1,lastSkullCreateTime:0,lastTickTime:0,life:10,pauseTimestamp:0,score:0,skullFallSpeed:10},this.addEventListeners()}var e,s,i;return e=t,(s=[{key:"gameClickEvents",value:function(t){var e=this;"game"===this.state.currentScreen&&this.state.life>0&&!this.state.isPaused&&Object.keys(this.skulls).length>0&&t.yPos>this.config.headerHeight&&Object.values(this.skulls).forEach(function(s){s.wasClicked(t)&&(I(s.pointValue),s.sfx.crunch.play(),e.displayScores[s.id]={id:s.id,pointValue:s.pointValue,xPos:s.xPos+s.size/2,yPos:s.yPos+s.size/2,time:e.state.lastTickTime},delete e.skulls[s.id])})}},{key:"titleScreenClickEvents",value:function(){"title"===this.state.currentScreen&&(this.state.currentScreen="game",C(),this.components.fire.sfx.play(),this.components.fire.sfx.volume=1)}},{key:"visibilityChangeEvent",value:function(){var t=this;document.addEventListener("visibilitychange",function(){(t.state.isGameTabHidden=document.hidden,"game"===t.state.currentScreen&&t.state.life>0&&!t.state.isPaused)&&(t.state.isPaused=!0,t.state.pauseTimestamp=t.state.lastTickTime,t.components.fire.sfx.pause(),document.getElementById("game-controls").classList.toggle("play-control--paused"),E());0===t.state.life&&(t.state.isGameTabHidden?t.components.fire.sfx.pause():t.components.fire.sfx.play())})}},{key:"speedSliderEvent",value:function(){var t=this,e=document.getElementById("game-speed-control-slider");e.addEventListener("input",function(s){t.state.skullFallSpeed=e.value})}},{key:"playControlEvent",value:function(){var t=this,e=document.getElementById("game-controls");e.addEventListener("click",function(){t.state.life>0&&(e.classList.toggle("play-control--paused"),t.state.isPaused=!t.state.isPaused,E(),t.state.isPaused?(t.state.pauseTimestamp=t.state.lastTickTime,t.components.fire.sfx.pause()):t.components.fire.sfx.play())})}},{key:"addEventListeners",value:function(){var t=this;this.visibilityChangeEvent(),this.speedSliderEvent(),this.playControlEvent(),this.canvas.addEventListener("touchstart",function(e){t.titleScreenClickEvents(),t.gameClickEvents(M(e))}),this.canvas.addEventListener("click",function(e){t.titleScreenClickEvents(),t.gameClickEvents(M(e))})}},{key:"createSkull",value:function(){var t=new u(this.canvas.width,this.config.headerHeight,this.state.lastTickTime);this.skulls[t.id]=t}},{key:"addSkulls",value:function(){if(this.state.lastTickTime-this.state.lastSkullCreateTime>=1e3){var t=Object.values(this.skulls);if(0===t.length)this.createSkull();else{var e=t[t.length-1];e&&e.yPos>=e.size&&this.createSkull()}this.state.lastSkullCreateTime=this.state.lastTickTime}}},{key:"updateSkulls",value:function(){var t=this;Object.values(this.skulls).forEach(function(e){e.move(t.state.skullFallSpeed,t.state.lastTickTime,t.state.isPaused,t.state.pauseTimestamp),e.yPos>=t.canvas.height+e.size&&(e.sfx.burn.play(),delete t.skulls[e.id],t.state.life-=1,z(t.state.life),t.state.life||(t.state.gameOverTime=t.state.lastTickTime))})}},{key:"drawScores",value:function(){var t=this;Object.values(this.displayScores).forEach(function(e){t.state.lastTickTime-e.time<=500?(t.ctx.textAlign="start",t.ctx.font="20px ".concat(d),t.ctx.fillStyle=m,t.ctx.fillText("+".concat(e.pointValue),e.xPos,e.yPos)):delete t.displayScores[e.id]})}},{key:"runGame",value:function(){var t=this;this.state.isPaused?this.components.fire.sfx.pause():this.components.fire.sfx.played.length||this.components.fire.sfx.play(),Object.values(this.skulls).forEach(function(e){e.draw(t.ctx)}),this.components.fire.draw(this.fireCtx,this.fireCanvas.width,this.fireCanvas.height,this.state.isPaused),0===this.state.life&&this.gameOver(),this.drawScores()}},{key:"resetGameState",value:function(){this.state.skullFallSpeed=10,this.skulls={},this.state.life=10,z(this.state.life),this.state.score=0,I(0),this.state.isPaused=!1,document.getElementById("game-speed-control-slider").value=10}},{key:"gameOver",value:function(){this.ctx.textAlign="center";var t=this.config.isSmallScreen?50:80;this.ctx.font="".concat(t,"px ").concat(v),this.ctx.fillStyle="#bb0a1e",this.ctx.fillText("GAME OVER",this.canvas.width/2,this.canvas.height/2-t),this.state.isGameTabHidden&&(this.state.gameOverTime+=this.state.lastTickTime-this.state.gameOverTime),this.state.lastTickTime-this.state.gameOverTime>=5e3&&(this.resetGameState(),this.components.fire.sfx.volume=0,C(),this.state.currentScreen="title",this.fireCtx.clearRect(0,0,this.fireCanvas.width,this.fireCanvas.height))}},{key:"update",value:function(){"game"===this.state.currentScreen&&this.state.life>0&&(this.updateSkulls(),this.state.isPaused||this.addSkulls())}},{key:"render",value:function(){switch(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.state.currentScreen){case"game":this.runGame();break;default:this.screens.titleScreen.load(this.ctx,this.config.isSmallScreen)}}},{key:"run",value:function(t){var e=this;this.state.lastTickTime=Math.floor(t),window.requestAnimationFrame(function(t){return e.run(t)}),this.update(),this.render()}}])&&P(e.prototype,s),i&&P(e,i),t}(),O=s("Coxq"),H=s.n(O),j=s("+lyz"),B=s.n(j);s("+5i3");var G=new L;!function(t){for(var e=[y.a,a.a,H.a,B.a],s=[],i=0;i<e.length;i++)s[i]=new Image,s[i].src=e[i];s[s.length-1].addEventListener("load",function(){t()})}(function(){G.resetGameState();var t=window.performance.now();G.state.lastSkullCreateTime=t,G.run(t)})},i7XU:function(t,e,s){t.exports=s.p+"27662ad207610e3ed76bce537618eabd.svg"},xnML:function(t,e,s){t.exports=s.p+"27126068ad3068d268ece96cf35fada4.wav"}},[["e6Wu",1]]]);
//# sourceMappingURL=main.bundle.js.map?30bf1fd4a8be22a0636f