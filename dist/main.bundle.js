(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+5i3":function(t,e,s){},"7qVP":function(t,e,s){t.exports=s.p+"b44ba96b76b33b01a3ded944585d95f7.mp3"},DwMZ:function(t,e,s){t.exports=s.p+"0502bf4e41d1e7dddcd6fdec8a95a39e.wav"},Ydao:function(t,e,s){t.exports=s.p+"bf106e6a962421f0651f8e77797753c2.svg"},e6Wu:function(t,e,s){"use strict";s.r(e);var i=s("Ydao"),a=s.n(i),n=s("7qVP"),o=s.n(n),r=s("DwMZ"),c=s.n(r);function l(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function h(t,e){var s,i;return s=14+t,i=e-t-14,s=Math.ceil(s),i=Math.floor(i),Math.floor(Math.random()*(i-s+1))+s}var u=0,f=function(){function t(e,s,i){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=u++,this.size=10*(n=10,Math.ceil(Math.random()*Math.floor(n))),this.pointValue=10-this.size/10+1,this.xPos=h(this.size,e),this.yPos=s-this.size,this.lastTickTime=i,this.offset=0,this.skullImg=new Image,this.skullImg.src=a.a,this.sfx={crunch:new Audio,burn:new Audio},this.sfx.crunch.src=o.a,this.sfx.crunch.volume=.2,this.sfx.burn.src=c.a}var e,s,i;return e=t,(s=[{key:"draw",value:function(t){t.drawImage(this.skullImg,this.xPos,this.yPos,this.size,this.size)}},{key:"move",value:function(t,e,s,i){this.offset=s?i-e:this.offset,s||(this.yPos+=(e-this.lastTickTime+this.offset)*(t/1e3),this.lastTickTime=e,this.offset=0)}},{key:"wasClicked",value:function(t){return Math.pow(t.xPos-(this.xPos+this.size/2),2)+Math.pow(t.yPos-(this.yPos+this.size/2),2)<Math.pow(this.size/2,2)}}])&&l(e.prototype,s),i&&l(e,i),t}(),d="Source Code Pro",m="Creepster",v="#00ff00",p="#cccccc",g=s("i7XU"),k=s.n(g);function y(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var w=function(){function t(e,s,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.centerX=e/2,this.spiderWebImg=new Image,this.spiderWebImg.height=i?120:200,this.spiderWebImg.width=i?120:200,this.spiderWebImg.src=k.a,this.title={size:i?50:80},this.title.yPos=s/2-this.title.size,this.subtitle={size:i?28:34},this.subtitle.yPos=s/2+this.subtitle.size}var e,s,i;return e=t,(s=[{key:"load",value:function(t,e){t.textAlign="center",t.font="".concat(this.title.size,"px ").concat(m),t.fillStyle=p,t.fillText("SKULL CRUSHER",this.centerX,this.title.yPos),t.font="".concat(this.subtitle.size,"px  ").concat(d),t.fillText("Start",this.centerX,this.subtitle.yPos),t.drawImage(this.spiderWebImg,e?-50:-80,e?-42:-72,e?120:200,e?120:200)}}])&&y(e.prototype,s),i&&y(e,i),t}(),x=s("xnML"),b=s.n(x);function T(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var S=60,P=function(){function t(e,s,i){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.threshold=.5,this.imageData=e.createImageData(s,S),this.data=this.imageData.data,this.fire=[],this.fire.length=s*S,this.fire.fill(0),this.sfx=new Audio,this.sfx.src=b.a,this.sfx.addEventListener("ended",function(){a.sfx.play()}),this.colors=[],this.colors.length=256;for(var n=0;n<256;n++){var o=[];o[0]=o[1]=o[2]=o[3]=0,this.colors[n]=o}for(var r=0;r<32;++r)this.colors[r][2]=r<<1,this.colors[r+32][0]=r<<3,this.colors[r+32][2]=64-(r<<1),this.colors[r+64][0]=255,this.colors[r+64][1]=r<<3,this.colors[r+96][0]=255,this.colors[r+96][1]=255,this.colors[r+96][2]=r<<2,this.colors[r+128][0]=255,this.colors[r+128][1]=255,this.colors[r+128][2]=64+(r<<2),this.colors[r+160][0]=255,this.colors[r+160][1]=255,this.colors[r+160][2]=128+(r<<2),this.colors[r+192][0]=255,this.colors[r+192][1]=255,this.colors[r+192][2]=192+r,this.colors[r+224][0]=255,this.colors[r+224][1]=255,this.colors[r+224][2]=224+r}var e,s,i;return e=t,(s=[{key:"draw",value:function(t,e,s,i){if(!i){for(var a=e*(S-1),n=0;n<e;n++){var o=0;Math.random()>this.threshold&&(o=255),this.fire[a+n]=o}for(var r=0,c=0;c<S;++c){for(var l=0;l<e;++l){0===l?(r=this.fire[a],r+=this.fire[a],r+=this.fire[a-e],r/=3):l===e-1?(r=this.fire[a+l],r+=this.fire[a-e+l],r+=this.fire[a+l-1],r/=3):(r=this.fire[a+l],r+=this.fire[a+l+1],r+=this.fire[a+l-1],r+=this.fire[a-e+l],r/=4),r>1&&(r-=1),r=Math.floor(r);var h=a-e+l;this.fire[h]=r}a-=e}}for(var u=2;u<S;++u)for(var f=0;f<e;++f){var d=u*e*4+4*f,m=this.fire[(u-2)*e+f];this.data[d]=this.colors[m][0],this.data[++d]=this.colors[m][1],this.data[++d]=this.colors[m][2],this.data[++d]=255}t.putImageData(this.imageData,0,s-S)}}])&&T(e.prototype,s),i&&T(e,i),t}();function E(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function I(){document.getElementById("game-canvas-overlay").classList.toggle("canvas__overlay--active")}function C(){document.getElementById("game-header").classList.toggle("header--hidden")}function z(t){var e=document.getElementById("game-score");e.dataset.score=0!==t?Number(e.dataset.score)+t:0}function L(t){document.getElementById("game-life").style["min-width"]="".concat(t,"0px")}function M(t){var e={};if(t.targetTouches&&1===t.targetTouches.length){t.preventDefault();var s=t.targetTouches[0];e={xPos:s.pageX,yPos:s.pageY}}else e={xPos:t.offsetX,yPos:t.offsetY};return e}var O=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config={isSmallScreen:window.innerWidth<800,headerHeight:60},this.canvas=document.getElementById("game"),this.canvas.width=this.config.isSmallScreen?window.innerWidth:800,this.canvas.height=window.innerHeight,this.ctx=this.canvas.getContext("2d"),this.components={fire:new P(this.ctx,this.canvas.width,this.canvas.height)},this.displayScores={},this.screens={titleScreen:new w(this.canvas.width,this.canvas.height,this.config.isSmallScreen)},this.skulls={},this.state={currentScreen:"title",isGameTabHidden:!1,isPaused:!1,lastSkullCreateTime:0,lastTickTime:0,life:10,pauseTimestamp:0,score:0,skullFallSpeed:10,speedSliderIsSliding:!1},this.addEventListeners()}var e,s,i;return e=t,(s=[{key:"gameClickEvents",value:function(t){var e=this;"game"===this.state.currentScreen&&this.state.life>0&&!this.state.isPaused&&Object.keys(this.skulls).length>0&&t.yPos>this.config.headerHeight&&Object.values(this.skulls).forEach(function(s){s.wasClicked(t)&&(z(s.pointValue),s.sfx.crunch.play(),e.displayScores[s.id]={id:s.id,pointValue:s.pointValue,xPos:s.xPos+s.size/2,yPos:s.yPos+s.size/2,time:e.state.lastTickTime},delete e.skulls[s.id])})}},{key:"titleScreenClickEvents",value:function(){"title"===this.state.currentScreen&&(this.state.currentScreen="game",this.components.fire.sfx.volume=1,this.components.fire.sfx.play(),C())}},{key:"addEventListeners",value:function(){var t=this;document.addEventListener("visibilitychange",function(){(t.state.isGameTabHidden=document.hidden,"game"===t.state.currentScreen&&t.state.life>0&&!t.state.isPaused)&&(t.state.isPaused=!0,t.state.pauseTimestamp=t.state.lastTickTime,t.components.fire.sfx.pause(),document.getElementById("game-controls").classList.toggle("play-control--paused"),I());0===t.state.life&&(t.state.isGameTabHidden?t.components.fire.sfx.pause():t.components.fire.sfx.play())});var e=document.getElementById("game-speed-control-slider");e.addEventListener("input",function(s){t.state.skullFallSpeed=e.value});var s=document.getElementById("game-controls");s.addEventListener("click",function(){t.state.life>0&&(s.classList.toggle("play-control--paused"),t.state.isPaused=!t.state.isPaused,I(),t.state.isPaused?(t.state.pauseTimestamp=t.state.lastTickTime,t.components.fire.sfx.pause()):t.components.fire.sfx.play())}),this.canvas.addEventListener("click",function(e){t.titleScreenClickEvents(),t.gameClickEvents(M(e))}),this.canvas.addEventListener("touchstart",function(e){t.titleScreenClickEvents(),t.gameClickEvents(M(e))})}},{key:"createSkull",value:function(){var t=new f(this.canvas.width,this.config.headerHeight,this.state.lastTickTime);this.skulls[t.id]=t}},{key:"addSkulls",value:function(){if(this.state.lastTickTime-this.state.lastSkullCreateTime>=1e3){var t=Object.values(this.skulls);if(0===t.length)this.createSkull();else{var e=t[t.length-1];e&&e.yPos>=e.size&&this.createSkull()}this.state.lastSkullCreateTime=this.state.lastTickTime}}},{key:"updateSkulls",value:function(){var t=this;Object.values(this.skulls).forEach(function(e){e.move(t.state.skullFallSpeed,t.state.lastTickTime,t.state.isPaused,t.state.pauseTimestamp),e.yPos>=t.canvas.height+e.size&&(e.sfx.burn.play(),delete t.skulls[e.id],t.state.life-=1,L(t.state.life),t.state.life||(t.state.gameOverTime=t.state.lastTickTime))})}},{key:"drawScores",value:function(){var t=this;Object.values(this.displayScores).forEach(function(e){t.state.lastTickTime-e.time<=500?(t.ctx.textAlign="start",t.ctx.font="20px ".concat(d),t.ctx.fillStyle=v,t.ctx.fillText("+".concat(e.pointValue),e.xPos,e.yPos)):delete t.displayScores[e.id]})}},{key:"runGame",value:function(){var t=this;this.state.isPaused&&this.components.fire.sfx.pause(),this.components.fire.draw(this.ctx,this.canvas.width,this.canvas.height,this.state.isPaused),Object.values(this.skulls).forEach(function(e){e.draw(t.ctx)}),0===this.state.life&&this.gameOver(),this.drawScores()}},{key:"gameOver",value:function(){this.ctx.textAlign="center";var t=this.config.isSmallScreen?50:80;(this.ctx.font="".concat(t,"px ").concat(m),this.ctx.fillStyle="#bb0a1e",this.ctx.fillText("GAME OVER",this.canvas.width/2,this.canvas.height/2-t),this.state.isGameTabHidden&&(this.state.gameOverTime+=this.state.lastTickTime-this.state.gameOverTime),this.state.lastTickTime-this.state.gameOverTime>=5e3)&&(this.state.skullFallSpeed=10,this.skulls={},this.state.life=10,L(this.state.life),this.state.score=0,z(0),this.state.isPaused=!1,document.getElementById("game-speed-control-slider").value=10,this.components.fire.sfx.volume=0,C(),this.state.currentScreen="title")}},{key:"update",value:function(){"game"===this.state.currentScreen&&this.state.life>0&&(this.updateSkulls(),this.state.isPaused||this.addSkulls())}},{key:"render",value:function(){switch(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.state.currentScreen){case"game":this.runGame();break;default:this.screens.titleScreen.load(this.ctx,this.config.isSmallScreen)}}},{key:"run",value:function(t){var e=this;this.state.lastTickTime=t,window.requestAnimationFrame(function(t){return e.run(t)}),this.update(),this.render()}}])&&E(e.prototype,s),i&&E(e,i),t}(),j=(s("+5i3"),new O);document.addEventListener("DOMContentLoaded",function(){var t=window.performance.now();j.state.lastSkullCreateTime=t,j.run(t)})},i7XU:function(t,e,s){t.exports=s.p+"27662ad207610e3ed76bce537618eabd.svg"},xnML:function(t,e,s){t.exports=s.p+"27126068ad3068d268ece96cf35fada4.wav"}},[["e6Wu",1]]]);
//# sourceMappingURL=main.bundle.js.map?f898df45fc2673304679