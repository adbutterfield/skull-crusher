(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+lyz":function(t,e,s){t.exports=s.p+"98f48c4b98369fa1c1b63b653ed0ea3e.svg"},"7qVP":function(t,e,s){t.exports=s.p+"b44ba96b76b33b01a3ded944585d95f7.mp3"},Coxq:function(t,e,s){t.exports=s.p+"de8d272e1d85031c228dd258ade37a58.svg"},DwMZ:function(t,e,s){t.exports=s.p+"0502bf4e41d1e7dddcd6fdec8a95a39e.wav"},Ydao:function(t,e,s){t.exports=s.p+"bf106e6a962421f0651f8e77797753c2.svg"},e6Wu:function(t,e,s){"use strict";s.r(e);var i=s("Ydao"),a=s.n(i),n=s("7qVP"),o=s.n(n),l=s("DwMZ"),r=s.n(l);function h(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e){var s,i;return s=14+t,i=e-t-14,s=Math.ceil(s),i=Math.floor(i),Math.floor(Math.random()*(i-s+1))+s}var u=0,f=function(){function t(e,s,i){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=u++,this.size=10*(n=10,Math.ceil(Math.random()*Math.floor(n))),this.pointValue=10-this.size/10+1,this.xPos=c(this.size,e),this.yPos=s-this.size,this.lastTickTime=i,this.offset=0,this.skullImg=new Image,this.skullImg.src=a.a,this.sfx={crunch:new Audio,burn:new Audio},this.sfx.crunch.src=o.a,this.sfx.crunch.volume=.2,this.sfx.burn.src=r.a}var e,s,i;return e=t,(s=[{key:"draw",value:function(t){t.drawImage(this.skullImg,this.xPos,this.yPos,this.size,this.size)}},{key:"move",value:function(t,e,s,i){this.offset=s?i-e:this.offset,s||(this.yPos+=(e-this.lastTickTime+this.offset)*(t/1e3),this.lastTickTime=e,this.offset=0)}}])&&h(e.prototype,s),i&&h(e,i),t}(),d={backgroundColor:"#000000",font:"Source Code Pro",scoreColor:"#00ff00",textColor:"#cccccc"},v=s("i7XU"),m=s.n(v);function p(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var g=function(){function t(e,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.centerX=e/2,this.spiderWebImg=new Image,this.spiderWebImg.height=s?120:200,this.spiderWebImg.width=s?120:200,this.spiderWebImg.src=m.a}var e,s,i;return e=t,(s=[{key:"load",value:function(t,e){t.textAlign="center",t.font="".concat(e?"40px":"80px"," Creepster"),t.fillStyle=d.textColor,t.fillText("SKULL CRUSHER",this.centerX,e?140:200),t.font="".concat(e?"28px":"34px"," ").concat(d.font),t.fillText("Start",this.centerX,e?220:400),t.font="".concat(e?"20px":"26px"," ").concat(d.font),t.fillText("TAP or PRESS ENTER",this.centerX,"".concat(e?260:440)),t.drawImage(this.spiderWebImg,e?-50:-80,e?-42:-72,e?120:200,e?120:200)}}])&&p(e.prototype,s),i&&p(e,i),t}();function x(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var y=function(){function t(e,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xPos=0,this.yPos=0,this.width=e,this.height=s}var e,s,i;return e=t,(s=[{key:"draw",value:function(t,e){t.fillStyle=d.backgroundColor,t.fillRect(this.xPos,this.yPos,this.width,this.height),t.fillStyle=d.textColor,t.moveTo(this.xPos,this.height),t.lineTo(this.width,this.height),t.stroke()}}])&&x(e.prototype,s),i&&x(e,i),t}(),P=s("Coxq"),w=s.n(P),k=s("+lyz"),S=s.n(k);function b(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var T=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text={width:0,xPos:e-115,yPos:30},this.image={xPos:e-105,yPos:14,size:18},this.playImg=new Image,this.playImg.height=this.image.size,this.playImg.width=this.image.size,this.playImg.src=w.a,this.pauseImg=new Image,this.pauseImg.height=this.image.size,this.pauseImg.width=this.image.size,this.pauseImg.src=S.a}var e,s,i;return e=t,(s=[{key:"draw",value:function(t,e){var s=e?"RESUME":"PAUSE";this.text.width=t.measureText(s).width,t.textAlign="end",t.font="20px ".concat(d.font),t.fillStyle=d.textColor,t.fillText(s,this.text.xPos,this.text.yPos),t.drawImage(e?this.playImg:this.pauseImg,this.image.xPos,this.image.yPos,this.image.size,this.image.size)}},{key:"wasClicked",value:function(t){return t.xPos>=this.text.xPos-this.text.width&&t.xPos<=this.image.xPos+this.image.size&&t.yPos>=this.image.yPos&&t.yPos<=this.image.yPos+this.image.size}}])&&b(e.prototype,s),i&&b(e,i),t}();function E(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var C=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.label={xPos:20,yPos:30},this.score={xPos:90,yPos:30}}var e,s,i;return e=t,(s=[{key:"draw",value:function(t,e){t.textAlign="start",t.font="20px ".concat(d.font),t.fillStyle=d.textColor,t.fillText("SCORE",this.label.xPos,this.label.yPos),t.fillStyle=d.scoreColor,t.fillText(e,this.score.xPos,this.score.yPos)}}])&&E(e.prototype,s),i&&E(e,i),t}();function M(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var I=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.label={xPos:e-175,yPos:50,height:14},this.dot={defaultXPos:e-120,xPos:e-120,yPos:45,size:5},this.line={xPosStart:e-120,xPosEnd:e-20,yPos:45},this.fillStyle=d.textColor,this.strokeStyle=d.textColor,this.isSliding=!1,this.textHeight=0}var e,s,i;return e=t,(s=[{key:"draw",value:function(t){t.textAlign="start",t.font="".concat(this.label.height,"px ").concat(d.font),t.fillStyle=d.textColor,t.fillText("SPEED",this.label.xPos,this.label.yPos),t.beginPath(),t.arc(this.dot.xPos,this.dot.yPos,this.dot.size,0,2*Math.PI,!1),t.strokeStyle=this.strokeStyle,t.fillStyle=this.fillStyle,t.fill(),t.moveTo(this.line.xPosStart,this.line.yPos),t.lineTo(this.line.xPosEnd,this.line.yPos),t.stroke()}},{key:"wasClicked",value:function(t){return Math.pow(t.xPos-this.dot.xPos,2)+Math.pow(t.yPos-this.dot.yPos,2)<Math.pow(2*this.dot.size,2)}},{key:"reset",value:function(){this.dot.xPos=this.dot.defaultXPos}},{key:"updateSlider",value:function(t){this.isSliding&&t>=this.line.xPosStart&&t<=this.line.xPosEnd&&(this.dot.xPos=t)}},{key:"moveToPointOnBar",value:function(t){this.dot.xPos=t}},{key:"barWasClicked",value:function(t){return t.yPos>=this.label.yPos-this.label.height/2&&t.yPos<=this.label.yPos+this.label.height/2&&t.xPos>=this.line.xPosStart&&t.xPos<=this.line.xPosEnd}},{key:"getSkullFallSpeed",value:function(){var t=Math.floor((this.dot.xPos-this.line.xPosStart)/(this.line.xPosEnd-this.line.xPosStart)*100);this.line.xPosEnd,this.line.xPosStart;return Math.floor(t/100*90)+10}}])&&M(e.prototype,s),i&&M(e,i),t}(),z=s("xnML"),O=s.n(z);function L(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var j=57,A=function(){function t(e,s,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.threshold=.5,this.imageData=e.createImageData(s,j),this.data=this.imageData.data,this.fire=[],this.fire.length=s*j,this.fire.fill(0),this.sfx=new Audio,this.sfx.src=O.a,this.colors=[],this.colors.length=256;for(var a=0;a<256;a++){var n=[];n[0]=n[1]=n[2]=n[3]=0,this.colors[a]=n}for(var o=0;o<32;++o)this.colors[o][2]=o<<1,this.colors[o+32][0]=o<<3,this.colors[o+32][2]=64-(o<<1),this.colors[o+64][0]=255,this.colors[o+64][1]=o<<3,this.colors[o+96][0]=255,this.colors[o+96][1]=255,this.colors[o+96][2]=o<<2,this.colors[o+128][0]=255,this.colors[o+128][1]=255,this.colors[o+128][2]=64+(o<<2),this.colors[o+160][0]=255,this.colors[o+160][1]=255,this.colors[o+160][2]=128+(o<<2),this.colors[o+192][0]=255,this.colors[o+192][1]=255,this.colors[o+192][2]=192+o,this.colors[o+224][0]=255,this.colors[o+224][1]=255,this.colors[o+224][2]=224+o}var e,s,i;return e=t,(s=[{key:"draw",value:function(t,e,s,i){if(!i){for(var a=e*(j-1),n=0;n<e;n++){var o=0;Math.random()>this.threshold&&(o=255),this.fire[a+n]=o}for(var l=0,r=0;r<j;++r){for(var h=0;h<e;++h){0===h?(l=this.fire[a],l+=this.fire[a],l+=this.fire[a-e],l/=3):h===e-1?(l=this.fire[a+h],l+=this.fire[a-e+h],l+=this.fire[a+h-1],l/=3):(l=this.fire[a+h],l+=this.fire[a+h+1],l+=this.fire[a+h-1],l+=this.fire[a-e+h],l/=4),l>1&&(l-=1),l=Math.floor(l);var c=a-e+h;this.fire[c]=l}a-=e}}for(var u=2;u<j;++u)for(var f=0;f<e;++f){var d=u*e*4+4*f,v=this.fire[(u-2)*e+f];this.data[d]=this.colors[v][0],this.data[++d]=this.colors[v][1],this.data[++d]=this.colors[v][2],this.data[++d]=255}t.putImageData(this.imageData,0,s-j)}}])&&L(e.prototype,s),i&&L(e,i),t}();function D(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var F=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.label={xPos:20,yPos:50,height:14,width:e.measureText("LIFE").width+10}}var e,s,i;return e=t,(s=[{key:"draw",value:function(t,e){t.textAlign="start",t.font="".concat(this.label.height,"px ").concat(d.font),t.fillStyle=d.textColor,t.fillText("LIFE",this.label.xPos,this.label.yPos);for(var s=0;s<10;s++)t.fillStyle=s<e?"#ffffff":"#bb0a1e",t.fillRect(this.label.xPos+this.label.width+10+10*s,this.label.yPos-11,6,this.label.height-2)}}])&&D(e.prototype,s),i&&D(e,i),t}();function W(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function R(t){var e={};if(t.targetTouches&&1===t.targetTouches.length){t.preventDefault();var s=t.targetTouches[0];e={xPos:s.pageX,yPos:s.pageY}}else e={xPos:t.offsetX,yPos:t.offsetY};return e}var X=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config={isSmallScreen:window.innerWidth<800,headerHeight:60},this.canvas=document.getElementById("game"),this.canvas.width=this.config.isSmallScreen?window.innerWidth:800,this.canvas.height=window.innerHeight,this.ctx=this.canvas.getContext("2d"),this.components={controlButton:new T(this.canvas.width),header:new y(this.canvas.width,this.config.headerHeight),fire:new A(this.ctx,this.canvas.width,this.canvas.height),scoreDisplay:new C,speedSlider:new I(this.canvas.width),lifeGauge:new F(this.ctx)},this.displayScores={},this.screens={titleScreen:new g(this.canvas.width,this.config.isSmallScreen)},this.skulls={},this.state={clickPoint:{},currentScreen:"title",isPaused:!1,lastSkullCreateTime:0,lastTickTime:0,life:10,pauseTimestamp:0,score:0,skullFallSpeed:10},this.addEventListeners()}var e,s,i;return e=t,(s=[{key:"gameClickEvents",value:function(t){var e=this;"game"===this.state.currentScreen&&(this.state.life>0&&this.components.controlButton.wasClicked(t)&&(this.state.isPaused=!this.state.isPaused,this.state.pauseTimestamp=this.state.isPaused?this.state.lastTickTime:0),this.components.speedSlider.barWasClicked(t)&&(this.components.speedSlider.moveToPointOnBar(t.xPos),this.state.skullFallSpeed=this.components.speedSlider.getSkullFallSpeed()),this.state.life>0&&!this.state.isPaused&&Object.keys(this.skulls).length>0&&t.yPos>this.config.headerHeight&&Object.values(this.skulls).forEach(function(s){(function(t,e){return Math.pow(t.xPos-(e.xPos+e.size/2),2)+Math.pow(t.yPos-(e.yPos+e.size/2),2)<Math.pow(e.size/2,2)})(t,s)&&(e.state.score+=s.pointValue,s.sfx.crunch.play(),e.displayScores[s.id]={id:s.id,pointValue:s.pointValue,xPos:s.xPos+s.size/2,yPos:s.yPos+s.size/2,time:e.state.lastTickTime},delete e.skulls[s.id])}))}},{key:"gameMouseDownEvents",value:function(t){"game"===this.state.currentScreen&&this.components.speedSlider.wasClicked(t)&&(this.components.speedSlider.isSliding=!0)}},{key:"gameMouseMoveEvents",value:function(t){"game"===this.state.currentScreen&&this.components.speedSlider.isSliding&&(this.state.clickPoint=R(t),this.components.speedSlider.updateSlider(this.state.clickPoint.xPos),this.state.skullFallSpeed=this.components.speedSlider.getSkullFallSpeed())}},{key:"gameMouseUpEvents",value:function(t){"game"===this.state.currentScreen&&this.components.speedSlider.isSliding&&(this.components.speedSlider.isSliding=!1)}},{key:"addEventListeners",value:function(){var t=this;"title"===this.state.currentScreen&&(document.onkeydown=function(e){13===e.keyCode&&(t.components.fire.sfx.volume=1,t.state.currentScreen="game")},this.canvas.addEventListener("touchstart",function(e){t.state.currentScreen="game"})),this.canvas.addEventListener("click",function(e){t.gameClickEvents(t.state.clickPoint)}),this.canvas.addEventListener("mousedown",function(e){t.state.clickPoint=R(e),t.gameMouseDownEvents(t.state.clickPoint)}),this.canvas.addEventListener("touchstart",function(e){t.state.clickPoint=R(e),t.gameClickEvents(t.state.clickPoint),t.gameMouseDownEvents(t.state.clickPoint)}),this.canvas.addEventListener("mousemove",function(e){t.gameMouseMoveEvents(e)}),this.canvas.addEventListener("touchmove",function(e){t.gameMouseMoveEvents(e)}),this.canvas.addEventListener("mouseup",function(e){t.gameMouseUpEvents(e)}),this.canvas.addEventListener("touchend",function(e){t.gameMouseUpEvents(e)})}},{key:"createSkull",value:function(){return new f(this.canvas.width,this.config.headerHeight,this.state.lastTickTime)}},{key:"addSkulls",value:function(){if("game"===this.state.currentScreen&&this.state.life>0&&!this.state.isPaused&&this.state.lastTickTime-this.state.lastSkullCreateTime>=1e3){var t=Object.values(this.skulls);if(0===t.length){var e=this.createSkull();this.skulls[e.id]=e}var s=t[t.length-1];if(s&&s.yPos>=s.size){var i=this.createSkull();this.skulls[i.id]=i}this.state.lastSkullCreateTime=this.state.lastTickTime}}},{key:"updateSkulls",value:function(){var t=this;Object.values(this.skulls).forEach(function(e){"game"===t.state.currentScreen&&(e.move(t.state.skullFallSpeed,t.state.lastTickTime,t.state.isPaused,t.state.pauseTimestamp),e.yPos>=t.canvas.height+e.size&&(e.sfx.burn.play(),delete t.skulls[e.id],t.state.life-=1,t.state.life||(t.state.gameOverTime=t.state.lastTickTime)))})}},{key:"drawScores",value:function(){var t=this;Object.values(this.displayScores).forEach(function(e){t.state.lastTickTime-e.time<=500?(t.ctx.textAlign="start",t.ctx.font="20px ".concat(d.font),t.ctx.fillStyle=d.scoreColor,t.ctx.fillText("+".concat(e.pointValue),e.xPos,e.yPos)):delete t.displayScores[e.id]})}},{key:"startGame",value:function(){var t=this;this.components.fire.draw(this.ctx,this.canvas.width,this.canvas.height,this.state.isPaused),Object.values(this.skulls).forEach(function(e){e.draw(t.ctx)}),0===this.state.life&&this.gameOver(),this.drawScores(),this.components.header.draw(this.ctx,this.canvas.width),this.components.scoreDisplay.draw(this.ctx,this.state.score),this.components.speedSlider.draw(this.ctx),this.components.controlButton.draw(this.ctx,this.state.isPaused),this.components.lifeGauge.draw(this.ctx,this.state.life)}},{key:"gameOver",value:function(){this.ctx.textAlign="center",this.ctx.font="".concat(this.config.isSmallScreen?"40px":"80px"," Creepster"),this.ctx.fillStyle="#bb0a1e",this.ctx.fillText("GAME OVER",this.canvas.width/2,this.config.isSmallScreen?200:300),this.state.lastTickTime-this.state.gameOverTime>=5e3&&(this.state.skullFallSpeed=10,this.skulls={},this.state.life=10,this.state.score=0,this.state.isPaused=!1,this.components.speedSlider.reset(),this.components.fire.sfx.volume=0,this.state.currentScreen="title")}},{key:"update",value:function(){this.state.life>0&&(this.updateSkulls(),this.addSkulls())}},{key:"render",value:function(){switch(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.state.currentScreen){case"game":this.startGame(),this.state.isPaused?this.components.fire.sfx.pause():this.components.fire.sfx.play();break;default:this.screens.titleScreen.load(this.ctx,this.config.isSmallScreen)}}},{key:"run",value:function(t){var e=this;this.state.lastTickTime=t,window.requestAnimationFrame(function(t){return e.run(t)}),this.update(),this.render()}}])&&W(e.prototype,s),i&&W(e,i),t}(),U=(s("lE3a"),new X),V=window.performance.now();U.state.lastSkullCreateTime=V,U.run(V)},i7XU:function(t,e,s){t.exports=s.p+"27662ad207610e3ed76bce537618eabd.svg"},lE3a:function(t,e,s){},xnML:function(t,e,s){t.exports=s.p+"27126068ad3068d268ece96cf35fada4.wav"}},[["e6Wu",1]]]);
//# sourceMappingURL=main.bundle.js.map?807b269afb1ed4501f5b