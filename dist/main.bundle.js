(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"+5i3":function(t,e,s){},"+lyz":function(t,e,s){t.exports=s.p+"98f48c4b98369fa1c1b63b653ed0ea3e.svg"},"7qVP":function(t,e,s){t.exports=s.p+"b44ba96b76b33b01a3ded944585d95f7.mp3"},Coxq:function(t,e,s){t.exports=s.p+"de8d272e1d85031c228dd258ade37a58.svg"},DwMZ:function(t,e,s){t.exports=s.p+"0502bf4e41d1e7dddcd6fdec8a95a39e.wav"},Ydao:function(t,e,s){t.exports=s.p+"bf106e6a962421f0651f8e77797753c2.svg"},e6Wu:function(t,e,s){"use strict";s.r(e);var i=s("Ydao"),a=s.n(i),n=s("7qVP"),o=s.n(n),r=s("DwMZ"),l=s.n(r);function h(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function c(t,e){var s,i;return s=14+t,i=e-t-14,s=Math.ceil(s),i=Math.floor(i),Math.floor(Math.random()*(i-s+1))+s}var u=0,f=function(){function t(e,s,i){var n;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=u++,this.size=10*(n=10,Math.ceil(Math.random()*Math.floor(n))),this.pointValue=10-this.size/10+1,this.xPos=c(this.size,e),this.yPos=s-this.size,this.lastTickTime=i,this.offset=0,this.skullImg=new Image,this.skullImg.src=a.a,this.sfx={crunch:new Audio,burn:new Audio},this.sfx.crunch.src=o.a,this.sfx.crunch.volume=.2,this.sfx.burn.src=l.a}var e,s,i;return e=t,(s=[{key:"draw",value:function(t){t.drawImage(this.skullImg,this.xPos,this.yPos,this.size,this.size)}},{key:"move",value:function(t,e,s,i){this.offset=s?i-e:this.offset,s||(this.yPos+=(e-this.lastTickTime+this.offset)*(t/1e3),this.lastTickTime=e,this.offset=0)}},{key:"wasClicked",value:function(t){return Math.pow(t.xPos-(this.xPos+this.size/2),2)+Math.pow(t.yPos-(this.yPos+this.size/2),2)<Math.pow(this.size/2,2)}}])&&h(e.prototype,s),i&&h(e,i),t}(),d="Source Code Pro",v="Creepster",m="#00ff00",p="#cccccc",g=s("i7XU"),k=s.n(g);function y(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var x=function(){function t(e,s,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.centerX=e/2,this.spiderWebImg=new Image,this.spiderWebImg.height=i?120:200,this.spiderWebImg.width=i?120:200,this.spiderWebImg.src=k.a,this.title={size:i?50:80},this.title.yPos=s/2-this.title.size,this.subtitle={size:i?28:34},this.subtitle.yPos=s/2+this.subtitle.size}var e,s,i;return e=t,(s=[{key:"load",value:function(t,e){t.textAlign="center",t.font="".concat(this.title.size,"px ").concat(v),t.fillStyle=p,t.fillText("SKULL CRUSHER",this.centerX,this.title.yPos),t.font="".concat(this.subtitle.size,"px  ").concat(d),t.fillText("Start",this.centerX,this.subtitle.yPos),t.drawImage(this.spiderWebImg,e?-50:-80,e?-42:-72,e?120:200,e?120:200)}}])&&y(e.prototype,s),i&&y(e,i),t}(),w=s("xnML"),b=s.n(w);function T(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var S=function(){function t(e,s,i){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fireHeight=60,this.imageData=e.createImageData(s,this.fireHeight),this.data=this.imageData.data,this.fire=[],this.fire.length=s*this.fireHeight,this.fire.fill(0),this.sfx=new Audio,this.sfx.src=b.a,this.sfx.addEventListener("ended",function(){a.sfx.play()}),this.colors=[],this.colors.length=256;for(var n=0;n<256;n++){this.colors[n]=[0,0,0]}for(var o=0;o<32;++o)this.colors[o][2]=o<<1,this.colors[o+32][0]=o<<3,this.colors[o+32][2]=64-(o<<1),this.colors[o+64][0]=255,this.colors[o+64][1]=o<<3,this.colors[o+96][0]=255,this.colors[o+96][1]=255,this.colors[o+96][2]=o<<2,this.colors[o+128][0]=255,this.colors[o+128][1]=255,this.colors[o+128][2]=64+(o<<2),this.colors[o+160][0]=255,this.colors[o+160][1]=255,this.colors[o+160][2]=128+(o<<2),this.colors[o+192][0]=255,this.colors[o+192][1]=255,this.colors[o+192][2]=192+o,this.colors[o+224][0]=255,this.colors[o+224][1]=255,this.colors[o+224][2]=224+o;this.lookupTable=[];for(var r=1e6;r--;)this.lookupTable.push(Math.random());this.lookupIndex=0,this.bottomLine=s*(this.fireHeight-1)}var e,s,i;return e=t,(s=[{key:"lookup",value:function(){return++this.lookupIndex>=this.lookupTable.length?this.lookupTable[this.lookupIndex=0]:this.lookupTable[this.lookupIndex]}},{key:"update",value:function(t){for(var e=this.bottomLine,s=0;s<this.fireHeight;++s){for(var i=0;i<t;++i){0===s&&(this.fire[e+i]=this.lookup()>.5?255:0);var a=0;a=0===i?(this.fire[e]+this.fire[e]+this.fire[e-t])/3:i===t-1?(this.fire[e+i]+this.fire[e-t+i]+this.fire[e+i-1])/3:(this.fire[e+i]+this.fire[e+i+1]+this.fire[e+i-1]+this.fire[e-t+i])/4,this.fire[e-t+i]=~~(a>1?a-1:a)}e-=t}}},{key:"draw",value:function(t,e,s){for(var i=0;i<this.fireHeight;++i)for(var a=0;a<e;++a){if(i>=2){var n=i*e*4+4*a,o=this.fire[(i-2)*e+a];this.data[n]=this.colors[o][0],this.data[++n]=this.colors[o][1],this.data[++n]=this.colors[o][2],this.data[++n]=!this.colors[o][0]&&!this.colors[o][1]&&this.colors[o][2]<=255?0:200}}t.putImageData(this.imageData,0,s-this.fireHeight)}}])&&T(e.prototype,s),i&&T(e,i),t}();function P(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function E(){document.getElementById("game-canvas-overlay").classList.toggle("canvas__overlay--active")}function C(){document.getElementById("game-header").classList.toggle("header--hidden")}function I(t){var e=document.getElementById("game-score");e.dataset.score=0!==t?Number(e.dataset.score)+t:0}function z(t){document.getElementById("game-life").style["min-width"]="".concat(t,"0px")}function L(t){var e={};if(t.targetTouches&&1===t.targetTouches.length){t.preventDefault();var s=t.targetTouches[0];e={xPos:s.pageX,yPos:s.pageY}}else e={xPos:t.offsetX,yPos:t.offsetY};return e}var H=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config={isSmallScreen:window.innerWidth<800,headerHeight:60},this.canvas=document.getElementById("game-canvas"),this.canvas.width=this.config.isSmallScreen?window.innerWidth:800,this.canvas.height=window.innerHeight,this.ctx=this.canvas.getContext("2d"),this.fireCanvas=document.getElementById("fire-canvas"),this.fireCanvas.width=this.config.isSmallScreen?window.innerWidth:800,this.fireCanvas.height=window.innerHeight,this.fireCtx=this.fireCanvas.getContext("2d"),this.components={fire:new S(this.fireCtx,this.fireCanvas.width,this.fireCanvas.height)},this.displayScores={},this.screens={titleScreen:new x(this.canvas.width,this.canvas.height,this.config.isSmallScreen)},this.skulls={},this.state={currentScreen:"title",isGameTabHidden:!1,isPaused:!1,lastSkullCreateTime:0,lastTickTime:0,life:10,pauseTimestamp:0,score:0,skullFallSpeed:10},this.addEventListeners()}var e,s,i;return e=t,(s=[{key:"gameClickEvents",value:function(t){var e=this;"game"===this.state.currentScreen&&this.state.life>0&&!this.state.isPaused&&Object.keys(this.skulls).length>0&&t.yPos>this.config.headerHeight&&Object.values(this.skulls).forEach(function(s){s.wasClicked(t)&&(I(s.pointValue),s.sfx.crunch.play(),e.displayScores[s.id]={id:s.id,pointValue:s.pointValue,xPos:s.xPos+s.size/2,yPos:s.yPos+s.size/2,time:e.state.lastTickTime},delete e.skulls[s.id],e.updateSpeed(e.state.skullFallSpeed+1))})}},{key:"titleScreenClickEvents",value:function(){"title"===this.state.currentScreen&&(this.state.currentScreen="game",C(),this.components.fire.sfx.play(),this.components.fire.sfx.volume=1)}},{key:"visibilityChangeEvent",value:function(){var t=this;document.addEventListener("visibilitychange",function(){(t.state.isGameTabHidden=document.hidden,"game"===t.state.currentScreen&&t.state.life>0&&!t.state.isPaused)&&(t.state.isPaused=!0,t.state.pauseTimestamp=t.state.lastTickTime,t.components.fire.sfx.pause(),document.getElementById("game-controls").classList.toggle("play-control--paused"),E());0===t.state.life&&(t.state.isGameTabHidden?t.components.fire.sfx.pause():t.components.fire.sfx.play())})}},{key:"speedSliderEvent",value:function(){var t=this,e=document.getElementById("game-speed-control-slider");e.addEventListener("input",function(s){t.state.skullFallSpeed=Number(e.value)})}},{key:"playControlEvent",value:function(){var t=this,e=document.getElementById("game-controls");e.addEventListener("mousedown",function(){t.state.life>0&&(e.classList.toggle("play-control--paused"),t.state.isPaused=!t.state.isPaused,E(),t.state.isPaused?(t.state.pauseTimestamp=t.state.lastTickTime,t.components.fire.sfx.pause()):t.components.fire.sfx.play())})}},{key:"addEventListeners",value:function(){var t=this;this.visibilityChangeEvent(),this.speedSliderEvent(),this.playControlEvent(),this.canvas.addEventListener("touchstart",function(e){t.titleScreenClickEvents(),t.gameClickEvents(L(e))}),this.canvas.addEventListener("click",function(e){t.titleScreenClickEvents(),t.gameClickEvents(L(e))})}},{key:"createSkull",value:function(){var t=new f(this.canvas.width,this.config.headerHeight,this.state.lastTickTime);this.skulls[t.id]=t}},{key:"addSkulls",value:function(){if(this.state.lastTickTime-this.state.lastSkullCreateTime>=1e3){var t=Object.values(this.skulls);if(0===t.length)this.createSkull();else{var e=t[t.length-1];e&&e.yPos>=e.size&&this.createSkull()}this.state.lastSkullCreateTime=this.state.lastTickTime}}},{key:"updateSkulls",value:function(){var t=this;Object.values(this.skulls).forEach(function(e){e.move(t.state.skullFallSpeed,t.state.lastTickTime,t.state.isPaused,t.state.pauseTimestamp),e.yPos>=t.canvas.height+e.size&&(e.sfx.burn.play(),delete t.skulls[e.id],t.state.life-=1,z(t.state.life),t.state.life||(t.state.gameOverTime=t.state.lastTickTime))})}},{key:"updateSpeed",value:function(t){if(t<=100){var e=document.getElementById("game-speed-control-slider");this.state.skullFallSpeed=t,e.value=t}}},{key:"drawScores",value:function(){var t=this;Object.values(this.displayScores).forEach(function(e){t.state.lastTickTime-e.time<=500?(t.ctx.textAlign="start",t.ctx.font="20px ".concat(d),t.ctx.fillStyle=m,t.ctx.fillText("+".concat(e.pointValue),e.xPos,e.yPos)):delete t.displayScores[e.id]})}},{key:"runGame",value:function(){var t=this;this.state.isPaused?this.components.fire.sfx.pause():this.components.fire.sfx.played.length||this.components.fire.sfx.play(),Object.values(this.skulls).forEach(function(e){e.draw(t.ctx)}),this.components.fire.draw(this.fireCtx,this.fireCanvas.width,this.fireCanvas.height),0===this.state.life&&this.gameOver(),this.drawScores()}},{key:"resetGameState",value:function(){this.skulls={},this.state.life=10,z(this.state.life),this.state.score=0,I(0),this.state.isPaused=!1,this.updateSpeed(10)}},{key:"gameOver",value:function(){this.ctx.textAlign="center";var t=this.config.isSmallScreen?50:80;this.ctx.font="".concat(t,"px ").concat(v),this.ctx.fillStyle="#bb0a1e",this.ctx.fillText("GAME OVER",this.canvas.width/2,this.canvas.height/2-t),this.state.isGameTabHidden&&(this.state.gameOverTime+=this.state.lastTickTime-this.state.gameOverTime),this.state.lastTickTime-this.state.gameOverTime>=5e3&&(this.resetGameState(),this.components.fire.sfx.volume=0,C(),this.state.currentScreen="title",this.fireCtx.clearRect(0,0,this.fireCanvas.width,this.fireCanvas.height))}},{key:"update",value:function(){"game"===this.state.currentScreen&&this.state.life>0&&(this.updateSkulls(),this.state.isPaused||(this.addSkulls(),this.components.fire.update(this.fireCanvas.width)))}},{key:"render",value:function(){switch(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.state.currentScreen){case"game":this.runGame();break;default:this.screens.titleScreen.load(this.ctx,this.config.isSmallScreen)}}},{key:"run",value:function(t){var e=this;this.state.lastTickTime=Math.floor(t),window.requestAnimationFrame(function(t){return e.run(t)}),this.update(),this.render()}}])&&P(e.prototype,s),i&&P(e,i),t}(),M=s("Coxq"),O=s.n(M),j=s("+lyz"),B=s.n(j);s("+5i3");var G,W,A,D=new H;G=function(){D.resetGameState();var t=window.performance.now();D.state.lastSkullCreateTime=t,D.run(t)},W=[k.a,a.a,O.a,B.a],A=[],W.forEach(function(t,e){A[e]=new Image,A[e].src=t}),A[A.length-1].addEventListener("load",function(){G()})},i7XU:function(t,e,s){t.exports=s.p+"27662ad207610e3ed76bce537618eabd.svg"},xnML:function(t,e,s){t.exports=s.p+"27126068ad3068d268ece96cf35fada4.wav"}},[["e6Wu",1]]]);
//# sourceMappingURL=main.bundle.js.map?1ac2e200b7621fea1169